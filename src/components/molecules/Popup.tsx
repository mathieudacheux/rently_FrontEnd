import { useEffect } from 'react'
import Button from '../atoms/Button.tsx'
import { useTranslation } from 'react-i18next'

export default function Popup({
  open,
  text,
  error = false,
}: {
  open: boolean
  text: string
  error?: boolean
}): JSX.Element {
  const { t } = useTranslation()

  useEffect(() => {
    if (open) {
      // eslint-disable-next-line @typescript-eslint/ban-ts-comment
      // @ts-ignore
      window.my_modal_5.showModal()
    }
  }, [open])

  return (
    <dialog id='my_modal_5' className='modal modal-bottom sm:modal-middle'>
      <form method='dialog' className='modal-box '>
        {error ? (
          <svg
            width='84'
            height='100'
            viewBox='0 0 84 100'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path
              fillRule='evenodd'
              clipRule='evenodd'
              d='M41.9988 0C47.5647 0 76.7747 10.0265 80.636 13.8927C83.8587 17.1153 83.8095 19.719 83.5836 32.2116C83.4951 37.2126 83.3723 44.0263 83.3723 53.4437C83.3723 87.2519 44.7105 99.3466 43.0648 99.8428C42.716 99.9509 42.3574 100 41.9988 100C41.6401 100 41.2815 99.9509 40.9327 99.8428C39.287 99.3466 0.62521 87.2519 0.62521 53.4437C0.62521 44.0116 0.502396 37.1979 0.41397 32.1969C0.373617 29.9687 0.338903 28.0554 0.327424 26.3972L0.325928 24.5259C0.367608 18.3785 0.943298 16.3097 3.35659 13.8927C7.22277 10.0265 36.4328 0 41.9988 0ZM41.9988 7.36883C37.8329 7.36883 11.5458 16.6241 8.51478 19.1541C7.93339 19.7387 7.71744 20.6089 7.68979 24.0621L7.68755 25.3919C7.6934 27.0771 7.72763 29.2461 7.77789 32.0593C7.87123 37.0996 7.99405 43.9526 7.99405 53.4437C7.99405 78.9939 36.1037 90.337 41.9939 92.4248C47.8791 90.3272 76.0035 78.9202 76.0035 53.4437C76.0035 43.9625 76.1263 37.1144 76.2147 32.0741C76.2663 29.2582 76.3015 27.0873 76.3069 25.3995L76.3039 24.0675C76.273 20.6073 76.0437 19.7249 75.4238 19.1049C72.4468 16.6241 46.1646 7.36883 41.9988 7.36883ZM35.3712 37.0269L41.9991 43.6579L48.6263 37.0269C50.0657 35.5875 52.3942 35.5875 53.8336 37.0269C55.273 38.4663 55.273 40.7948 53.8336 42.2342L47.2065 48.8652L53.8326 55.4883C55.272 56.9277 55.272 59.2562 53.8326 60.6956C53.1154 61.4178 52.1722 61.7764 51.229 61.7764C50.2858 61.7764 49.3425 61.4178 48.6253 60.6956L41.9991 54.0725L35.3722 60.6956C34.655 61.4178 33.7118 61.7764 32.7686 61.7764C31.8253 61.7764 30.8821 61.4178 30.1649 60.6956C28.7255 59.2562 28.7255 56.9277 30.1649 55.4883L36.7918 48.8652L30.1639 42.2342C28.7245 40.7948 28.7245 38.4663 30.1639 37.0269C31.6033 35.5875 33.9319 35.5875 35.3712 37.0269Z'
              fill='#F45252'
            />
          </svg>
        ) : (
          <svg
            width='84'
            height='100'
            viewBox='0 0 84 100'
            fill='none'
            xmlns='http://www.w3.org/2000/svg'
          >
            <path
              fillRule='evenodd'
              clipRule='evenodd'
              d='M41.9986 0C47.5645 0 76.7697 10.0265 80.6359 13.8927C83.8585 17.1153 83.8094 19.719 83.5834 32.1969C83.495 37.1979 83.3721 44.0116 83.3721 53.4437C83.3721 87.2519 44.7103 99.3466 43.0646 99.8428C42.7158 99.9509 42.3572 100 41.9986 100C41.64 100 41.2814 99.9509 40.9326 99.8428C39.2869 99.3466 0.625056 87.2519 0.625056 53.4437C0.625056 44.0263 0.502242 37.2126 0.413816 32.2116C0.373463 29.9808 0.33875 28.0653 0.327326 26.4053L0.325928 24.5322C0.368068 18.3785 0.945601 16.3097 3.36626 13.8927C7.22262 10.0265 36.4278 0 41.9986 0ZM41.9986 7.36883C37.8328 7.36883 11.5506 16.6241 8.51953 19.1541C7.62545 20.0531 7.59106 21.6152 7.78265 32.0741C7.87108 37.1144 7.99389 43.9625 7.99389 53.4437C7.99389 78.9939 36.1035 90.337 41.9937 92.4248C47.8789 90.3272 76.0033 78.9202 76.0033 53.4437C76.0033 43.9526 76.1261 37.0996 76.2195 32.0593C76.4062 21.6103 76.3718 20.0481 75.4236 19.1049C72.4515 16.6241 46.1644 7.36883 41.9986 7.36883ZM60.2807 36.0557C61.7201 37.4951 61.7201 39.8286 60.2807 41.2679L41.1315 60.422C40.5813 60.9761 39.8708 61.3353 39.108 61.4568L38.5279 61.5027C37.5503 61.5027 36.612 61.1147 35.9193 60.422L26.6248 51.1176C25.1903 49.6782 25.1903 47.3398 26.6297 45.9054C28.0641 44.466 30.4025 44.466 31.8419 45.9054L38.5279 52.6012L55.0734 36.0557C56.5127 34.6163 58.8413 34.6163 60.2807 36.0557Z'
              fill='#20C745'
            />
          </svg>
        )}
        <hr className='py-1 h-1' />
        <p className='text-center text-neutral-900 font-normal'>{t(text)}</p>
        <div className='modal-action flex justify-center align-middle'>
          <Button text='popup.close' />
        </div>
      </form>
    </dialog>
  )
}
